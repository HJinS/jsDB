### 기본
---
- 보통 노드 하나는 딤스크 페이지 하나에 저장된다.
- 노드 크기는 삽입/삭제에 의해 변하기 때문에 Slotted Page 구조를 사용한다.

### Slotted Page
---
Page Header
- 페이지의 메타데이터 저장

Slot Array
- 각 레코드의 위치(offset)와 같이 정보를 저장하는 작은 배열

Data Area
- 페이지의 뒤 -> 앞 으로 자라며, 실제 **키, 값** 데이터가 저장

Free Space
- Slot Array 와 Data Area 사이의 남는 공간

#### 동작 방식
**삽입**
- 새로운 데이터를 빈 공간(Data Area)에 추가하고, 슬롯 배열(Slot Array)에 그 데이터의 위치와 같이 길이를 기록

**삭제**
- 슬롯 배열(Slot Area)에서 해당 레코드를 가리키는 슬롯 정보만 삭제하거나 "삭제됨"으로  표시
- 실제 데이터는 나중에 **페이지 압축** 할 때 정리

### 페이지 관리
---
모든 노드 참조는 고유한 **페이지 ID**(보통 8 Bit)를 사용
- InternalNode 자식 포인터 -> 자식 노드의 페이지 ID 목록
- LeafNode의 형제 포인터 -> 형제 리프 노드의 페이지 ID

#### 파일 헤더, 루트 포인터
B+Tree 를 저장하는 파일의 맨 앞부분(첫번째 페이지)은 특별한 **파일 헤더** 페이지를 사용. 

### 버퍼풀 매니저
---
버퍼풀에 페이지 캐시 영역을 두고 사용
1. 페이지 요청: 특정 pageId의 페이지 요청
2. 캐시 확인: 해당 페이지가 이미 버퍼풀에 있는지 확인 있으면 반환.
3. 캐시 미스
   - 디스크에서 읽어와야함
   - 버퍼풀이 가득 차면 교체 전략(Replacement Policy, 주로 LRU(Least Recently Used))에 따라 가장 오랫동안 사용되지 않은 페이지를 교체
   - 선택된 페이지가 더티 페이지라면(수정 되었다면) 디스크에 먼저 flush(저장) 한 후 공간을 비움
   - 비워진 공간에 요청받은 페이지를 읽은 후 메모리 주소 반환



TODO
- Slotted Page 조사
- mmap(메모리 맵 파일)
- FileChannel